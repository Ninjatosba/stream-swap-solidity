<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="1350" viewBox="0 0 1200 1350" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#00796B" />
    </marker>
    <style><![CDATA[
      .bg { fill: #f4f8f9; }
      .entity { fill: #ffffff; stroke: #000000; stroke-width: 2; rx: 8; }
      .entity-text { fill: #000; font-weight: 600; font-size: 15px; }
      .actor { fill: #fffde7; stroke: #000000; stroke-width: 2; }
      .actor-text { fill: #000; font-weight: 500; }
      .label { fill: #000; font-size: 13px; font-weight: 500; }
      .title-label { fill: #000; font-size: 16px; font-weight: bold; text-anchor: middle; }
      .line { stroke: #000000; stroke-width: 2; marker-end: url(#arrow); fill: none; }
      .cluster { fill: rgba(0, 150, 136, 0.05); stroke: #00796B; stroke-width: 2; stroke-dasharray: 8 8; rx: 8; }
      .subscriber-cluster { fill: rgba(255, 193, 7, 0.05); stroke: #FFC107; stroke-width: 2; stroke-dasharray: 8 8; rx: 8; }
      .out-token-shape { fill: #e8f5e9; stroke: #388e3c; stroke-width: 1.5; }
      .in-token-shape { fill: #e0f7fa; stroke: #0097a7; stroke-width: 1.5; }
      .token-text { font-size: 11px; font-weight: 600; text-anchor: middle; }
    ]]></style>
  </defs>
  <rect width="100%" height="100%" class="bg"/>

  <text class="title-label" x="600" y="40">Creator &amp; Governance Flow</text>
  
  <g transform="translate(150, 200)"><circle class="actor" r="45" /><text class="actor-text" x="0" y="5" text-anchor="middle">Creator</text></g>
  <g transform="translate(1050, 200)"><circle class="actor" r="50" /><text class="actor-text" x="0" y="-5" text-anchor="middle">DAO /</text><text class="actor-text" x="0" y="15" text-anchor="middle">Governance</text></g>

  <g transform="translate(600, 200)"><rect class="entity" width="180" height="50" x="-90" y="-25" /><text class="entity-text" x="0" y="5" text-anchor="middle">StreamFactory</text></g>
  
  <rect class="cluster" x="300" y="300" width="600" height="200" />
  <g transform="translate(600, 400)"><rect class="entity" width="180" height="60" x="-90" y="-30" /><text class="entity-text" x="0" y="5" text-anchor="middle">Stream</text></g>
  
  <g transform="translate(350, 600)"><rect class="entity" width="180" height="50" x="-90" y="-25" /><text class="entity-text" x="0" y="5" text-anchor="middle">VestingFactory</text></g>
  <g transform="translate(850, 600)"><rect class="entity" width="180" height="50" x="-90" y="-25" /><text class="entity-text" x="0" y="5" text-anchor="middle">PoolWrapper</text></g>

  <!-- Oklar (Bölüm 1) -->
  <path class="line" d="M1000, 200 H 690" /><text class="label" x="840" y="190">set fees &amp; upgrade</text>
  
  <path class="line" d="M195, 200 H 510" />
  <text class="label" x="300" y="185">createStream &amp; fund with</text>
  <circle class="out-token-shape" cx="480" cy="180" r="12"/><text class="token-text" fill="#388e3c" x="480" y="184">OUT</text>

  <path class="line" d="M600, 225 V 370" /><text class="label" x="610" y="300">deploy &amp; init Stream</text>
  
  <path class="line" d="M150, 245 V 400 H 510" /><text class="label" x="350" y="390">finalize</text>
  <path class="line" d="M510, 420 H 170 V 245" /><text class="label" x="280" y="435">get revenue</text>
  <circle class="in-token-shape" cx="375" cy="430" r="12"/><text class="token-text" fill="#0097a7" x="375" y="434">IN</text>

  <path class="line" d="M600, 430 V 550 H 350 V 575" /><text class="label" x="400" y="545">setup vesting (optional)</text>
  <circle class="in-token-shape" cx="565" cy="540" r="12"/><text class="token-text" fill="#0097a7" x="565" y="544">IN</text>
  
  <path class="line" d="M600, 430 V 550 H 850 V 575" /><text class="label" x="660" y="545">seed liquidity (optional)</text>
  <circle class="in-token-shape" cx="820" cy="540" r="12"/><text class="token-text" fill="#0097a7" x="820" y="544">IN</text>
  <circle class="out-token-shape" cx="845" cy="540" r="12"/><text class="token-text" fill="#388e3c" x="845" y="544">OUT</text>

  <rect class="subscriber-cluster" x="50" y="700" width="1100" height="400" />
  <text class="title-label" x="600" y="690">Subscriber Flow</text>

  <g transform="translate(150, 850)"><circle class="actor" r="45" /><text class="actor-text" x="0" y="5" text-anchor="middle">Subscriber</text></g>

  <g transform="translate(600, 850)"><rect class="entity" width="180" height="90" x="-90" y="-45" /><text class="entity-text" x="0" y="5" text-anchor="middle">Stream</text></g>
  <g transform="translate(1000, 850)"><rect class="entity" width="180" height="60" x="-90" y="-30" /><text class="entity-text" x="0" y="5" text-anchor="middle">PositionStorage</text></g>
  <g transform="translate(600, 1020)"><rect class="entity" width="180" height="50" x="-90" y="-25" /><text class="entity-text" x="0" y="5" text-anchor="middle">VestingFactory</text></g>

  <!-- Oklar (Bölüm 2) -->
  <path class="line" d="M195,825 H 510" /><text class="label" x="330" y="815">subscribe</text>
  <circle class="in-token-shape" cx="400" cy="820" r="12"/><text class="token-text" fill="#0097a7" x="400" y="824">IN</text>
  
  <path class="line" d="M510, 855 H 195" /><text class="label" x="330" y="845">withdraw</text>
  <circle class="in-token-shape" cx="400" cy="850" r="12"/><text class="token-text" fill="#0097a7" x="400" y="854">IN</text>
  
  <path class="line" d="M510, 885 H 195" /><text class="label" x="350" y="880">exit</text>
  <circle class="out-token-shape" cx="400" cy="880" r="12"/><text class="token-text" fill="#388e3c" x="400" y="884">OUT</text>

  <path class="line" d="M690,850 H 910" /><text class="label" x="780" y="840">updates shares</text>
  
  <path class="line" d="M600, 895 V 995" /><text class="label" x="610" y="940">create vesting on exit (optional)</text>
  <circle class="out-token-shape" cx="620" cy="970" r="12"/><text class="token-text" fill="#388e3c" x="620" y="974">OUT</text>

  <!-- Lejant -->
  <g transform="translate(350, 1150)">
    <rect x="0" y="0" width="500" height="100" fill="#ffffff" stroke="#000" stroke-width="1.5" rx="8" />
    <text x="250" y="25" font-size="16" font-weight="bold" text-anchor="middle">Token Legend</text>
    <circle class="in-token-shape" cx="40" cy="55" r="12"/><text class="token-text" fill="#0097a7" x="40" y="59">IN</text>
    <text x="65" y="60" font-size="14">Payment Token (e.g., USDC, ETH)</text>
    <circle class="out-token-shape" cx="40" cy="85" r="12"/><text class="token-text" fill="#388e3c" x="40" y="89">OUT</text>
    <text x="65" y="90" font-size="14">Token Being Streamed (e.g., Project Token)</text>
  </g>
</svg> 